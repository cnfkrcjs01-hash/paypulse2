<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>PayPulse - 직접 인건비 관리 시스템</title>
  
  <!-- Inter 폰트 -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
  
  <!-- Tailwind CSS -->
  <script src="https://cdn.tailwindcss.com"></script>
  <script>
    tailwind.config = {
      theme: {
        extend: {
          colors: {
            primary: {
              50: '#fff7ed',
              100: '#ffedd5',
              200: '#fed7aa',
              300: '#fdba74',
              400: '#fb923c',
              500: '#f97316',
              600: '#ea580c',
              700: '#c2410c',
              800: '#9a3412',
              900: '#7c2d12',
            }
          },
          fontFamily: {
            sans: ['Inter', 'system-ui', 'sans-serif'],
          }
        }
      }
    }
  </script>
  
  <style>
    body { font-family: 'Inter', system-ui, sans-serif; }
    .animate-fade-in { animation: fadeIn 0.5s ease-in-out; }
    @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }
    .animate-slide-up { animation: slideUp 0.3s ease-out; }
    @keyframes slideUp { from { transform: translateY(10px); opacity: 0; } to { transform: translateY(0); opacity: 1; } }
  </style>
</head>
<body>
  <div id="root"></div>
  
  <script src="https://unpkg.com/react@18/umd/react.development.js"></script>
  <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
  <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
  
  <script type="text/babel">
    const { useState, useEffect } = React;
    
    // Icons
    const ChartBarIcon = ({ className }) => React.createElement('svg', { className, fill: 'none', stroke: 'currentColor', viewBox: '0 0 24 24' }, 
      React.createElement('path', { strokeLinecap: 'round', strokeLinejoin: 'round', strokeWidth: 2, d: 'M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z' }));
    
    const UsersIcon = ({ className }) => React.createElement('svg', { className, fill: 'none', stroke: 'currentColor', viewBox: '0 0 24 24' },
      React.createElement('path', { strokeLinecap: 'round', strokeLinejoin: 'round', strokeWidth: 2, d: 'M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197m13.5-9a2.5 2.5 0 11-5 0 2.5 2.5 0 015 0z' }));
    
    const ClockIcon = ({ className }) => React.createElement('svg', { className, fill: 'none', stroke: 'currentColor', viewBox: '0 0 24 24' },
      React.createElement('path', { strokeLinecap: 'round', strokeLinejoin: 'round', strokeWidth: 2, d: 'M12 6v6h4.5m4.5 0a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z' }));
    
    const TrophyIcon = ({ className }) => React.createElement('svg', { className, fill: 'none', stroke: 'currentColor', viewBox: '0 0 24 24' },
      React.createElement('path', { strokeLinecap: 'round', strokeLinejoin: 'round', strokeWidth: 2, d: 'M16.5 18.75h-9m9 0a3 3 0 0 1 3 3h-15a3 3 0 0 1 3-3m9 0v-3.375c0-.621-.503-1.125-1.125-1.125h-.871M7.5 18.75v-3.375c0-.621.504-1.125 1.125-1.125h.872m5.007 0H9.497m5.007 0a7.454 7.454 0 0 1-.982-3.172M9.497 14.25a7.454 7.454 0 0 0 .981-3.172M15.75 4.5V2.25a.75.75 0 0 0-.75-.75h-6a.75.75 0 0 0-.75.75V4.5' }));
    
    const MagnifyingGlassIcon = ({ className }) => React.createElement('svg', { className, fill: 'none', stroke: 'currentColor', viewBox: '0 0 24 24' },
      React.createElement('path', { strokeLinecap: 'round', strokeLinejoin: 'round', strokeWidth: 2, d: 'm21 21-5.197-5.197m0 0A7.5 7.5 0 1 0 5.196 5.196a7.5 7.5 0 0 0 10.607 10.607Z' }));
    
    const DocumentArrowDownIcon = ({ className }) => React.createElement('svg', { className, fill: 'none', stroke: 'currentColor', viewBox: '0 0 24 24' },
      React.createElement('path', { strokeLinecap: 'round', strokeLinejoin: 'round', strokeWidth: 2, d: 'M12 9.75v6.75m0 0-3-3m3 3 3-3m-8.25 6a4.5 4.5 0 0 1-1.41-8.775 5.25 5.25 0 0 1 10.233-2.33 3 3 0 0 1 3.758 3.848A3.752 3.752 0 0 1 18.75 19.5H6.75Z' }));
    
    const CalendarIcon = ({ className }) => React.createElement('svg', { className, fill: 'none', stroke: 'currentColor', viewBox: '0 0 24 24' },
      React.createElement('path', { strokeLinecap: 'round', strokeLinejoin: 'round', strokeWidth: 2, d: 'M6.75 3v2.25M17.25 3v2.25M3 18.75V7.5a2.25 2.25 0 0 1 2.25-2.25h13.5A2.25 2.25 0 0 1 21 7.5v11.25m-18 0A2.25 2.25 0 0 0 5.25 21h13.5a2.25 2.25 0 0 0 2.25-2.25m-18 0v-7.5A2.25 2.25 0 0 1 5.25 9h13.5a2.25 2.25 0 0 1 2.25 2.25v7.5' }));
    
    // Sidebar Component
    const Sidebar = () => {
      const menuItems = [
        { icon: ChartBarIcon, label: '메인 대시보드', path: '/dashboard' },
        { icon: ChartBarIcon, label: '종합 인건비', path: '/labor-cost' },
        { icon: UsersIcon, label: '직접 인건비', path: '/direct-labor', active: true },
        { icon: UsersIcon, label: '간접 인건비', path: '/indirect-labor' },
      ];

      return (
        <div className="w-64 bg-gray-800 text-white flex flex-col">
          <div className="p-6 border-b border-gray-700">
            <div className="flex items-center space-x-3">
              <div className="w-8 h-8 bg-orange-500 rounded-full flex items-center justify-center">
                <span className="text-white font-bold text-sm">P</span>
              </div>
              <h1 className="text-xl font-bold text-orange-500">PayPulse</h1>
            </div>
            <p className="text-gray-400 text-sm mt-2">AI 기반 스마트 인건비 관리 시스템</p>
            <p className="text-orange-400 text-xs mt-1">급여와 개인정보보호를 위해 암호화됨</p>
          </div>

          <nav className="flex-1 px-4 py-6 space-y-2">
            <div className="text-orange-400 text-sm font-semibold mb-4">인건비 관리</div>
            {menuItems.map((item, index) => (
              <button
                key={index}
                className={`w-full flex items-center space-x-3 px-4 py-3 rounded-lg text-left transition-colors ${
                  item.active ? 'bg-orange-500 text-white' : 'text-gray-300 hover:bg-gray-700 hover:text-white'
                }`}
              >
                <item.icon className="w-5 h-5" />
                <span className="text-sm">{item.label}</span>
              </button>
            ))}
          </nav>

          <div className="p-4 border-t border-gray-700">
            <div className="text-gray-400 text-xs animate-pulse">
              현재 인력 분석 중...
            </div>
          </div>
        </div>
      );
    };
    
    // DirectLaborPage Component
    const DirectLaborPage = () => {
      const [laborData, setLaborData] = useState([]);
      const [searchTerm, setSearchTerm] = useState('');
      const [selectedPeriod, setSelectedPeriod] = useState('2024-08');
      const [selectedDepartment, setSelectedDepartment] = useState('');
      const [selectedPosition, setSelectedPosition] = useState('');
      const [loading, setLoading] = useState(true);

      const sampleData = [
        { id: '1', employeeName: '김철수', department: 'IT개발팀', position: '선임', basicSalary: 4500000, overtime: 800000, bonus: 300000, total: 5600000 },
        { id: '2', employeeName: '박영희', department: 'IT개발팀', position: '주임', basicSalary: 3800000, overtime: 600000, bonus: 200000, total: 4600000 },
        { id: '3', employeeName: '이민수', department: '영업팀', position: '과장', basicSalary: 5200000, overtime: 400000, bonus: 500000, total: 6100000 },
        { id: '4', employeeName: '최지영', department: '마케팅팀', position: '대리', basicSalary: 4200000, overtime: 500000, bonus: 250000, total: 4950000 },
        { id: '5', employeeName: '정현우', department: 'IT개발팀', position: '사원', basicSalary: 3200000, overtime: 700000, bonus: 150000, total: 4050000 },
        { id: '6', employeeName: '한소희', department: '인사팀', position: '주임', basicSalary: 3600000, overtime: 300000, bonus: 200000, total: 4100000 },
        { id: '7', employeeName: '윤성민', department: '영업팀', position: '선임', basicSalary: 4400000, overtime: 600000, bonus: 400000, total: 5400000 },
        { id: '8', employeeName: '김예진', department: '마케팅팀', position: '사원', basicSalary: 3000000, overtime: 450000, bonus: 100000, total: 3550000 }
      ];

      useEffect(() => {
        setTimeout(() => {
          setLaborData(sampleData);
          setLoading(false);
        }, 1000);
      }, [selectedPeriod]);

      const filteredData = laborData.filter(item => {
        const matchesSearch = item.employeeName.includes(searchTerm) ||
                             item.department.includes(searchTerm) ||
                             item.position.includes(searchTerm);
        const matchesDepartment = !selectedDepartment || item.department === selectedDepartment;
        const matchesPosition = !selectedPosition || item.position === selectedPosition;
        return matchesSearch && matchesDepartment && matchesPosition;
      });

      const totalDirectLabor = laborData.reduce((sum, item) => sum + item.total, 0);
      const totalOvertime = laborData.reduce((sum, item) => sum + item.overtime, 0);
      const totalBonus = laborData.reduce((sum, item) => sum + item.bonus, 0);

      const exportToExcel = () => {
        alert(`${selectedPeriod} 직접인건비 데이터를 Excel로 내보냅니다.\n총 ${filteredData.length}건의 데이터가 포함됩니다.`);
      };

      const StatCard = ({ title, value, icon: Icon, change }) => (
        <div className="bg-white rounded-lg shadow-md p-6 border-l-4 border-orange-500 animate-slide-up">
          <div className="flex items-center justify-between">
            <div>
              <p className="text-gray-600 text-sm font-medium">{title}</p>
              <p className="text-2xl font-bold text-gray-900 mt-2">{value}</p>
              {change && (
                <p className={`text-sm mt-1 ${change.startsWith('+') ? 'text-green-600' : 'text-red-600'}`}>
                  {change} vs 전월
                </p>
              )}
            </div>
            <div className="p-3 rounded-full bg-orange-100">
              <Icon className="w-6 h-6 text-orange-600" />
            </div>
          </div>
        </div>
      );

      const departmentStats = laborData.reduce((acc, item) => {
        if (!acc[item.department]) {
          acc[item.department] = { count: 0, total: 0 };
        }
        acc[item.department].count++;
        acc[item.department].total += item.total;
        return acc;
      }, {});

      if (loading) {
        return (
          <div className="flex items-center justify-center h-full">
            <div className="animate-spin rounded-full h-32 w-32 border-b-2 border-orange-500"></div>
          </div>
        );
      }

      return (
        <div className="p-8 animate-fade-in">
          {/* Header */}
          <div className="flex items-center justify-between mb-8">
            <div>
              <h1 className="text-3xl font-bold text-gray-900 flex items-center">
                <ChartBarIcon className="w-8 h-8 mr-3 text-orange-500" />
                직접 인건비 관리
              </h1>
              <p className="text-gray-600 mt-2">생산활동에 직접 투입되는 인력 비용 관리</p>
              <div className="flex items-center mt-2 text-sm text-orange-600">
                <span className="w-2 h-2 bg-orange-500 rounded-full mr-2 animate-pulse"></span>
                실시간 데이터 동기화 중
              </div>
            </div>
            <div className="flex items-center space-x-4">
              <div className="flex items-center space-x-2">
                <CalendarIcon className="w-5 h-5 text-gray-400" />
                <select
                  value={selectedPeriod}
                  onChange={(e) => setSelectedPeriod(e.target.value)}
                  className="border border-gray-300 rounded-lg px-3 py-2 text-sm focus:ring-2 focus:ring-orange-500 focus:border-orange-500"
                >
                  <option value="2024-08">2024년 8월</option>
                  <option value="2024-07">2024년 7월</option>
                  <option value="2024-06">2024년 6월</option>
                </select>
              </div>
              <button
                onClick={exportToExcel}
                className="flex items-center space-x-2 bg-orange-500 hover:bg-orange-600 text-white px-4 py-2 rounded-lg transition-colors shadow-md"
              >
                <DocumentArrowDownIcon className="w-4 h-4" />
                <span>Excel 내보내기</span>
              </button>
            </div>
          </div>

          {/* Stats Cards */}
          <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8">
            <StatCard title="총 직접인건비" value={`₩${totalDirectLabor.toLocaleString()}`} icon={ChartBarIcon} change="+12.5%" />
            <StatCard title="총 직원수" value={`${laborData.length}명`} icon={UsersIcon} change="+2명" />
            <StatCard title="연장근무비" value={`₩${totalOvertime.toLocaleString()}`} icon={ClockIcon} change="+8.3%" />
            <StatCard title="성과급" value={`₩${totalBonus.toLocaleString()}`} icon={TrophyIcon} change="+15.2%" />
          </div>

          {/* Search and Filters */}
          <div className="bg-white rounded-lg shadow-md mb-6">
            <div className="p-6 border-b border-gray-200">
              <div className="flex items-center space-x-4">
                <div className="flex-1 relative">
                  <MagnifyingGlassIcon className="w-5 h-5 text-gray-400 absolute left-3 top-1/2 transform -translate-y-1/2" />
                  <input
                    type="text"
                    placeholder="직원명, 부서, 직급으로 검색..."
                    value={searchTerm}
                    onChange={(e) => setSearchTerm(e.target.value)}
                    className="w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent"
                  />
                </div>
                <select 
                  value={selectedDepartment}
                  onChange={(e) => setSelectedDepartment(e.target.value)}
                  className="border border-gray-300 rounded-lg px-4 py-2 focus:ring-2 focus:ring-orange-500"
                >
                  <option value="">전체 부서</option>
                  <option value="IT개발팀">IT개발팀</option>
                  <option value="영업팀">영업팀</option>
                  <option value="마케팅팀">마케팅팀</option>
                  <option value="인사팀">인사팀</option>
                </select>
                <select 
                  value={selectedPosition}
                  onChange={(e) => setSelectedPosition(e.target.value)}
                  className="border border-gray-300 rounded-lg px-4 py-2 focus:ring-2 focus:ring-orange-500"
                >
                  <option value="">전체 직급</option>
                  <option value="사원">사원</option>
                  <option value="주임">주임</option>
                  <option value="대리">대리</option>
                  <option value="선임">선임</option>
                  <option value="과장">과장</option>
                </select>
              </div>
            </div>

            {/* Data Table */}
            <div className="overflow-x-auto">
              <table className="w-full">
                <thead className="bg-gray-50">
                  <tr>
                    <th className="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">직원정보</th>
                    <th className="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">기본급</th>
                    <th className="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">연장근무수당</th>
                    <th className="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">성과급</th>
                    <th className="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">총 직접인건비</th>
                    <th className="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">액션</th>
                  </tr>
                </thead>
                <tbody className="bg-white divide-y divide-gray-200">
                  {filteredData.map((employee, index) => (
                    <tr key={employee.id} className={`hover:bg-gray-50 ${index % 2 === 0 ? 'bg-white' : 'bg-gray-50'}`}>
                      <td className="px-6 py-4 whitespace-nowrap">
                        <div className="flex items-center">
                          <div className="w-8 h-8 bg-orange-100 rounded-full flex items-center justify-center mr-3">
                            <span className="text-orange-600 font-semibold text-sm">
                              {employee.employeeName.charAt(0)}
                            </span>
                          </div>
                          <div>
                            <div className="text-sm font-medium text-gray-900">{employee.employeeName}</div>
                            <div className="text-sm text-gray-500">{employee.department} · {employee.position}</div>
                          </div>
                        </div>
                      </td>
                      <td className="px-6 py-4 whitespace-nowrap text-sm text-gray-900 font-medium">₩{employee.basicSalary.toLocaleString()}</td>
                      <td className="px-6 py-4 whitespace-nowrap text-sm text-gray-900">₩{employee.overtime.toLocaleString()}</td>
                      <td className="px-6 py-4 whitespace-nowrap text-sm text-gray-900">₩{employee.bonus.toLocaleString()}</td>
                      <td className="px-6 py-4 whitespace-nowrap text-sm font-bold text-orange-600">₩{employee.total.toLocaleString()}</td>
                      <td className="px-6 py-4 whitespace-nowrap text-sm text-gray-500">
                        <button className="text-orange-600 hover:text-orange-900 font-medium">상세보기</button>
                      </td>
                    </tr>
                  ))}
                </tbody>
              </table>
            </div>

            {/* Pagination */}
            <div className="px-6 py-3 border-t border-gray-200 flex items-center justify-between">
              <div className="text-sm text-gray-700">총 {filteredData.length}건 중 1-{Math.min(10, filteredData.length)}건 표시</div>
              <div className="flex space-x-1">
                <button className="px-3 py-1 border border-gray-300 rounded text-sm hover:bg-gray-50">이전</button>
                <button className="px-3 py-1 bg-orange-500 text-white rounded text-sm">1</button>
                <button className="px-3 py-1 border border-gray-300 rounded text-sm hover:bg-gray-50">다음</button>
              </div>
            </div>
          </div>

          {/* Charts Section */}
          <div className="grid grid-cols-1 lg:grid-cols-2 gap-6">
            <div className="bg-white rounded-lg shadow-md p-6">
              <h3 className="text-lg font-semibold text-gray-900 mb-4 flex items-center">
                <span className="w-3 h-3 bg-orange-500 rounded-full mr-2"></span>부서별 직접인건비 분포
              </h3>
              <div className="h-64 flex flex-col justify-center">
                {Object.entries(departmentStats).map(([dept, stats]) => (
                  <div key={dept} className="mb-4">
                    <div className="flex justify-between items-center mb-2">
                      <span className="text-sm font-medium text-gray-700">{dept}</span>
                      <span className="text-sm text-gray-600">{stats.count}명 · ₩{stats.total.toLocaleString()}</span>
                    </div>
                    <div className="w-full bg-gray-200 rounded-full h-2">
                      <div className="bg-orange-500 h-2 rounded-full transition-all duration-500" style={{ width: `${(stats.total / totalDirectLabor) * 100}%` }}></div>
                    </div>
                    <div className="text-xs text-gray-500 mt-1">{((stats.total / totalDirectLabor) * 100).toFixed(1)}%</div>
                  </div>
                ))}
              </div>
            </div>
            
            <div className="bg-white rounded-lg shadow-md p-6">
              <h3 className="text-lg font-semibold text-gray-900 mb-4 flex items-center">
                <span className="w-3 h-3 bg-blue-500 rounded-full mr-2"></span>월별 직접인건비 추이
              </h3>
              <div className="h-64 flex items-center justify-center">
                <div className="text-center">
                  <ChartBarIcon className="h-12 w-12 text-blue-400 mx-auto mb-2" />
                  <p className="text-gray-500 mb-4">월별 추이 분석</p>
                  <div className="text-sm text-gray-600 space-y-2">
                    <div className="flex justify-between items-center bg-gray-50 p-2 rounded">
                      <span>6월</span><span className="font-semibold">₩35.2M</span>
                    </div>
                    <div className="flex justify-between items-center bg-gray-50 p-2 rounded">
                      <span>7월</span><span className="font-semibold">₩38.1M</span>
                    </div>
                    <div className="flex justify-between items-center bg-orange-50 p-2 rounded border border-orange-200">
                      <span className="text-orange-700">8월 (현재)</span>
                      <span className="font-semibold text-orange-700">₩{(totalDirectLabor / 1000000).toFixed(1)}M</span>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      );
    };
    
    // Main App
    const App = () => {
      return (
        <div className="flex h-screen bg-gray-50">
          <Sidebar />
          <main className="flex-1 overflow-auto">
            <DirectLaborPage />
          </main>
        </div>
      );
    };
    
    const root = ReactDOM.createRoot(document.getElementById('root'));
    root.render(<App />);
  </script>
</body>
</html>